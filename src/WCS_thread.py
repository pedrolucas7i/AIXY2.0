"""
===============================================================================================================================================================
===============================================================================================================================================================

                                                                   _      ___  __  __ __   __  ____         ___  
                                                                  / \    |_ _| \ \/ / \ \ / / |___ \       / _ \ 
                                                                 / _ \    | |   \  /   \ V /    __) |     | | | |
                                                                / ___ \   | |   /  \    | |    / __/   _  | |_| |
                                                               /_/   \_\ |___| /_/\_\   |_|   |_____| (_)  \___/ 

                                                               
                                                                            COMPUTER WCS CORE CODE
                                                                            by Pedro Ribeiro Lucas
                                                                                                                  
===============================================================================================================================================================
===============================================================================================================================================================
"""

from flask import Flask, render_template, Response
from camera import CameraUSB

#Initialize the Flask app
app = Flask(__name__, template_folder="./webserver")
camera = CameraUSB()

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/stream')
def stream():
    return Response(camera.get_web_stream(), mimetype='multipart/x-mixed-replace; boundary=frame')

def run():
    app.run(debug=True, port=9900, host="0.0.0.0")